# üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL –Ω–∞ Railway

## –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

**–õ–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (v4.0):**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite: `DATABASE_URL=sqlite+aiosqlite:///./spin_bot_test.db`
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞–ª—å–Ω–∞—è
- –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Railway

**Railway (v3.0 –≤ production):**
- –ò–º–µ–µ—Ç PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ù—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å DATABASE_URL –æ—Ç Railway
- –ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç—å .env

---

## –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å PostgreSQL –Ω–∞ Railway

### 1. –ü–æ–ª—É—á–∏—Ç—å DATABASE_URL —Å Railway

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ Railway Dashboard**
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://railway.app
2. –í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "Variables"
4. –ù–∞–π–¥–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL` –∏–ª–∏ `POSTGRES_URL`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ Railway CLI**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Railway CLI
npm i -g @railway/cli

# –í–æ–π—Ç–∏
railway login

# –ü–æ–ª—É—á–∏—Ç—å DATABASE_URL
railway variables
```

---

### 2. –û–±–Ω–æ–≤–∏—Ç—å .env —Ñ–∞–π–ª

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL PostgreSQL –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ `.env`:

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–æ–∫—É
DATABASE_URL=sqlite+aiosqlite:///./spin_bot_test.db

# –ù–∞ PostgreSQL URL –æ—Ç Railway
DATABASE_URL=postgresql://user:password@host:port/dbname
# –ò–ª–∏
DATABASE_URL=${{ DATABASE_URL }}  # –µ—Å–ª–∏ Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç
```

**–§–æ—Ä–º–∞—Ç Railway:**
```
postgres://postgres:password@containers-us-west-xxx.railway.app:5432/railway
```

**–≠—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤:**
```
postgresql+asyncpg://postgres:password@containers-us-west-xxx.railway.app:5432/railway
```

**–ò–ª–∏ –∫–æ–¥ —Å–∞–º –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç** (—Å—Ç—Ä–æ–∫–∏ 28-31 –≤ `database/database.py`):
```python
if DATABASE_URL.startswith('postgres://'):
    DATABASE_URL = DATABASE_URL.replace('postgres://', 'postgresql+asyncpg://', 1)
```

---

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å asyncpg –¥–ª—è PostgreSQL

```bash
pip install asyncpg
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:
```bash
pip list | grep asyncpg
```

---

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DATABASE_URL –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

```bash
python bot.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üîÑ Initializing database...
‚úÖ Database initialized successfully
```

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å DATABASE_URL
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ö–æ—Å—Ç–∞ Railway
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è

---

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite
- –ë–∞–∑–∞: `spin_bot_test.db`
- –î–∞–Ω–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ

### Production (Railway)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Railway
- –î–∞–Ω–Ω—ã–µ –æ–±—â–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –í–∞–∂–Ω–æ:
- **–õ–æ–∫–∞–ª—å–Ω–∞—è –∏ Railway –ë–î –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**
- –≠—Ç–æ —Ä–∞–∑–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway PostgreSQL
- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π SQLite

---

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Railway —Å PostgreSQL

–ï—Å–ª–∏ –¥–µ–ø–ª–æ–∏—Ç–µ v4.0 –Ω–∞ Railway:

1. **–û–±–Ω–æ–≤–∏—Ç–µ variables –≤ Railway:**
   ```
   DATABASE_URL=postgresql://... (—É–∂–µ –µ—Å—Ç—å –æ—Ç Railway)
   BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
   OPENAI_API_KEY=–≤–∞—à_–∫–ª—é—á
   ```

2. **Push –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
   ```bash
   git push origin main
   ```

3. **Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
   - –ü–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL –∏–∑ variables
   - –°–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

---

## üìù –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

**–õ–æ–∫–∞–ª—å–Ω–æ (v4.0):**
- ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ SQLite –ø–æ–¥–∫–ª—é—á–µ–Ω
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- üì¶ –ë–∞–∑–∞: `spin_bot_test.db`

**–ù–∞ Railway (v3.0):**
- ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω
- üì¶ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Railway

**–ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ v4.0 ‚Üí Railway:**
1. –ü–æ–ª—É—á–∏—Ç—å DATABASE_URL —Å Railway
2. –û–±–Ω–æ–≤–∏—Ç—å .env
3. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å v4.0 –Ω–∞ Railway

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–µ –∑–∞–±—É–¥—å—Ç–µ —Å–¥–µ–ª–∞—Ç—å backup** –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
2. **Railway PostgreSQL** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç –±—ç–∫–∞–ø—ã
3. **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** v3‚Üív4 –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –ª—É—á—à–µ –¥–µ–ª–∞—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SQLite –ª–æ–∫–∞–ª—å–Ω–æ
- –ë—ã—Å—Ç—Ä–æ, —É–¥–æ–±–Ω–æ, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç network
- –õ–µ–≥–∫–æ —Å–±—Ä–æ—Å–∏—Ç—å –ë–î –¥–ª—è —Ç–µ—Å—Ç–æ–≤

### –î–ª—è production:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL –Ω–∞ Railway
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

---

**–¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL –Ω–∞ Railway –¥–ª—è –±–æ—Ç–∞!**

