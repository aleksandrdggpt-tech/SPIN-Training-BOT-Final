# üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ v4.0 –≤ Railway

## üìã –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è
- ‚úÖ –°–µ—Ä–≤–∏—Å "SPIN-Training-BOT-Final" —Å–æ–∑–¥–∞–Ω
- ‚è≥ –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–µ–ø–ª–æ–π –∏–∑ –≤–µ—Ç–∫–∏ v4.0
- ‚è≥ –ü–æ–¥–∫–ª—é—á–∏—Ç—å PostgreSQL
- ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üéØ –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ (Source)

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings:**
   - –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Settings"** –≤ –≤–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Source:**
   - **Repository:** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `aleksandrdggpt-tech/SPIN-Training-BOT-Final`
   - **Branch:** –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ `v4.0` (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
   - **Root Directory:** —É–∫–∞–∂–∏—Ç–µ `versions/v4.0`
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–∏—Ç—å PostgreSQL

1. **–í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –Ω–∞–π–¥–∏—Ç–µ —Å–µ—Ä–≤–∏—Å "Postgres"**
   - –ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ: **"+"** ‚Üí **"Database"** ‚Üí **"Add PostgreSQL"**

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ DATABASE_URL:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–∏—Å "Postgres"
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Variables"**
   - –ù–∞–π–¥–∏—Ç–µ `DATABASE_URL` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é: `${{Postgres.DATABASE_URL}}`

3. **–î–æ–±–∞–≤—å—Ç–µ –≤ —Å–µ—Ä–≤–∏—Å v4.0:**
   - –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ —Å–µ—Ä–≤–∏—Å "SPIN-Training-BOT-Final"
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Variables"**
   - –ù–∞–∂–º–∏—Ç–µ **"New Variable"**
   - **Name:** `DATABASE_URL`
   - **Value:** –≤—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ `${{Postgres.DATABASE_URL}}`
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í **"Variables"** –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
```
DATABASE_URL=${{Postgres.DATABASE_URL}}
DEV_MODE=0
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
```

#### LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:
```
OPENAI_API_KEY=–≤–∞—à_–∫–ª—é—á
ANTHROPIC_API_KEY=–≤–∞—à_–∫–ª—é—á
```

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ):
```
BOT_NAME=spin_bot
PORT=8080
SCENARIO_PATH=scenarios/spin_sales/config.json
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=0
WRITE_PID_FILE=0
LLM_TIMEOUT_SEC=30.0
LLM_MAX_RETRIES=1
RESPONSE_PROVIDER=anthropic
FEEDBACK_PROVIDER=anthropic
CLASSIFICATION_PROVIDER=openai
ADMIN_USER_IDS=759603598
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π

1. **–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Source –∏ Variables:**
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –¥–µ–ø–ª–æ–π
   - –ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Deploy"** –≤–≤–µ—Ä—Ö—É

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Deployments"**
   - –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–π –¥–µ–ø–ª–æ–π
   - –û—Ç–∫—Ä–æ–π—Ç–µ **"View logs"**
   - –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
     - ‚úÖ `Database engine created: postgresql+asyncpg://...`
     - ‚úÖ `Database initialized successfully`
     - ‚úÖ `Application started`

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Build & Deploy

–í **Settings** ‚Üí **Build & Deploy**:

- **Root Directory:** `versions/v4.0` ‚úÖ
- **Start Command:** –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Procfile`)
- –ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ: `python bot.py`

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **DEV_MODE=0** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è production (PostgreSQL)
2. **Root Directory** ‚Äî –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `versions/v4.0`
3. **Branch** ‚Äî –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å `v4.0` (–ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∑–∞–ø—É—à–µ—Ç–µ –≤ GitHub)
4. **DATABASE_URL** ‚Äî –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `postgresql://` ‚Üí `postgresql+asyncpg://`
   - –î–æ–±–∞–≤–∏—Ç `sslmode=require`

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. **–õ–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å:**
   ```
   Database engine created: postgresql+asyncpg://... (pool_size=5, max_overflow=0)
   Database initialized successfully
   Application started
   ```

2. **–ï—Å–ª–∏ –æ—à–∏–±–∫–∏:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑ Postgres)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DEV_MODE=0` (–Ω–µ `1`)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω

## üìù –ß–µ–∫–ª–∏—Å—Ç

- [ ] Settings ‚Üí Source ‚Üí Branch: `v4.0`
- [ ] Settings ‚Üí Source ‚Üí Root Directory: `versions/v4.0`
- [ ] Variables ‚Üí DATABASE_URL –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] Variables ‚Üí DEV_MODE=0 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] Variables ‚Üí BOT_TOKEN —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] Variables ‚Üí API –∫–ª—é—á–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –î–µ–ø–ª–æ–π –∑–∞–ø—É—â–µ–Ω
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã (–Ω–µ—Ç –æ—à–∏–±–æ–∫)

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ –°—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–∏—Å "prolific-reflection" –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–≤–µ—Ç–∫–∞ `main`)
- ‚úÖ –ù–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å "SPIN-Training-BOT-Final" –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å v4.0 (–≤–µ—Ç–∫–∞ `v4.0`)
- ‚úÖ –û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞

