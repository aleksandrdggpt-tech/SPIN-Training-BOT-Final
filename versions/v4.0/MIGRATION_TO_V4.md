# üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ v4.0 —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

## üéØ –¶–µ–ª—å
- –ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –±–æ—Ç–∞ –Ω–∞ Railway –Ω–∞ –≤–µ—Ä—Å–∏—é 4.0
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Railway –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üìã –í–∞—Ä–∏–∞–Ω—Ç 1: –ù–æ–≤–∞—è –≤–µ—Ç–∫–∞ –¥–ª—è v4.0 (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –≤ `main` (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- ‚úÖ –õ–µ–≥–∫–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ
- ‚úÖ –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å v4.0 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

### –®–∞–≥–∏:

#### 1. –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –≤–µ—Ç–∫—É —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
```bash
cd /Users/aleksandrdg/Projects/SPIN\ Training\ BOT\ Final

# –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É backup —Å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
git checkout -b backup-main
git push origin backup-main

# –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ main
git checkout main
```

#### 2. –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É –¥–ª—è v4.0
```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ç–∫—É v4.0
git checkout -b v4.0

# –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã v4.0
git add versions/v4.0/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ .env –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω
git status | grep '\.env' && echo '‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï!' || echo '‚úÖ .env –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω'

# –ö–æ–º–º–∏—Ç
git commit -m "feat: Add v4.0 version with Railway deployment support

- PostgreSQL/asyncpg support with SSL
- Optional SQLite for local development (DEV_MODE=1)
- Railway deployment configuration (Procfile)
- PEP8 formatted code (all 61 Python files)
- Statistics functionality
- Free access flow (no payments in v4.0)"

# –ü—É—à –Ω–æ–≤–æ–π –≤–µ—Ç–∫–∏
git push origin v4.0
```

#### 3. –û–±–Ω–æ–≤–∏—Ç—å Railway –¥–ª—è –¥–µ–ø–ª–æ—è –∏–∑ –≤–µ—Ç–∫–∏ v4.0

–í Railway Dashboard:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Source**
3. –ò–∑–º–µ–Ω–∏—Ç–µ **Branch** —Å `main` –Ω–∞ `v4.0`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
5. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –¥–µ–ø–ª–æ–π

#### 4. –û–±–Ω–æ–≤–∏—Ç—å –ø—É—Ç—å –∫ —Ñ–∞–π–ª–∞–º –≤ Railway (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ v4.0:

–í Railway Dashboard:
1. **Settings** ‚Üí **Build & Deploy**
2. –í –ø–æ–ª–µ **Root Directory** —É–∫–∞–∂–∏—Ç–µ: `versions/v4.0`
3. –ò–ª–∏ –≤ `railway.json` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):
```json
{
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "cd versions/v4.0 && python bot.py",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

#### 5. –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- `BOT_TOKEN` - –≤–∞—à —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- `DATABASE_URL` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ PostgreSQL
- `DEV_MODE=0` - –¥–ª—è production (PostgreSQL)
- `DB_POOL_SIZE=5` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `DB_MAX_OVERFLOW=0` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `WRITE_PID_FILE=0` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìã –í–∞—Ä–∏–∞–Ω—Ç 2: –û–±–Ω–æ–≤–∏—Ç—å main –Ω–∞ v4.0 (–ø—Ä–æ—â–µ, –Ω–æ –º–µ–Ω–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ Railway –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –¥–µ–ø–ª–æ–∏—Ç—å –∏–∑ `main` (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- ‚úÖ –ü—Ä–æ—â–µ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ workflow

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ö†Ô∏è –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç—Å—è
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–µ–µ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è

### –®–∞–≥–∏:

#### 1. –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –≤–µ—Ç–∫—É
```bash
cd /Users/aleksandrdg/Projects/SPIN\ Training\ BOT\ Final

# –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É backup —Å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º main
git checkout main
git checkout -b backup-legacy
git push origin backup-legacy

# –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ main
git checkout main
```

#### 2. –û–±–Ω–æ–≤–∏—Ç—å main –Ω–∞ v4.0
```bash
# –î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª—ã v4.0
git add versions/v4.0/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ .env –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω
git status | grep '\.env' && echo '‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï!' || echo '‚úÖ .env –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω'

# –ö–æ–º–º–∏—Ç
git commit -m "feat: Upgrade to v4.0 with Railway deployment support

- PostgreSQL/asyncpg support with SSL
- Optional SQLite for local development (DEV_MODE=1)
- Railway deployment configuration (Procfile)
- PEP8 formatted code (all 61 Python files)
- Statistics functionality
- Free access flow (no payments in v4.0)"

# –ü—É—à –≤ main
git push origin main
```

#### 3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç –¥–µ–ø–ª–æ–π

Railway –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤–µ—Ç–∫—É `main`, –ø–æ—ç—Ç–æ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–±–Ω–∞—Ä—É–∂–∏—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç
- –ó–∞–ø—É—Å—Ç–∏—Ç –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `Procfile` –∏–∑ `versions/v4.0/`

#### 4. –û–±–Ω–æ–≤–∏—Ç—å Root Directory –≤ Railway (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:
1. **Settings** ‚Üí **Build & Deploy**
2. **Root Directory**: `versions/v4.0`

---

## üîÑ –û—Ç–∫–∞—Ç –∫ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –í–∞—Ä–∏–∞–Ω—Ç 1 (–≤–µ—Ç–∫–∞ v4.0):
```bash
# –í Railway –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –≤–µ—Ç–∫—É –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ main
# Settings ‚Üí Source ‚Üí Branch: main
```

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –í–∞—Ä–∏–∞–Ω—Ç 2 (–æ–±–Ω–æ–≤–∏–ª–∏ main):
```bash
# –í Railway –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –Ω–∞ backup-legacy
# Settings ‚Üí Source ‚Üí Branch: backup-legacy
# –ò–ª–∏ Root Directory –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º (–∫–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
```

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 1** (–Ω–æ–≤–∞—è –≤–µ—Ç–∫–∞ v4.0):
- –ë–µ–∑–æ–ø–∞—Å–Ω–µ–µ
- –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ü—Ä–æ—â–µ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è
- –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–æ–π

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] –†–µ–∑–µ—Ä–≤–Ω–∞—è –≤–µ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ (`backup-main` –∏–ª–∏ `backup-legacy`)
- [ ] –í—Å–µ —Ñ–∞–π–ª—ã v4.0 –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ git
- [ ] `.env` –ù–ï –¥–æ–±–∞–≤–ª–µ–Ω (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ `git status`)
- [ ] `.env.example` —Å–æ–∑–¥–∞–Ω
- [ ] –ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- [ ] –í–µ—Ç–∫–∞ –∑–∞–ø—É—à–µ–Ω–∞ –≤ GitHub
- [ ] Railway –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤–µ—Ç–∫—É
- [ ] Root Directory —É–∫–∞–∑–∞–Ω (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ): `versions/v4.0`
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] `DEV_MODE=0` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Railway (–¥–ª—è PostgreSQL)

---

## üöÄ –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway Dashboard
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç (PostgreSQL)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health check endpoint (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –≥–æ—Ç–æ–≤–æ! üéâ

